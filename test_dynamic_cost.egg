; Test if with-dynamic-cost is supported
(with-dynamic-cost
  (datatype Math
    (Num f64)
    (UserVar i64)
    (Add Math Math)
  )
)

; Simple rule
(rewrite (Add (Num 0.0) ?x) ?x)

; Test expression
(let test_expr (Add (UserVar 0) (Num 0.0)))

; Run with bounded iterations
(run 10)

; Query result
(query-extract test_expr)