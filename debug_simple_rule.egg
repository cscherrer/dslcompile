; Test simple rules that might cause loops

; Basic datatype (minimal)
(datatype Math
  (Num f64)
  (UserVar i64)
  (Add Math Math)
)

; Simple identity rule
(rewrite (Add (Num 0.0) ?x) ?x)
(rewrite (Add ?x (Num 0.0)) ?x)

; Test expression: x + 0.0
(let test_expr (Add (UserVar 0) (Num 0.0)))

; Try to run - this should terminate quickly
(run-schedule (saturate (run)))

; Query the result
(query-extract test_expr)