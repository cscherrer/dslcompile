; Debug test for sequential optimization phases

(let debug_input (Add (Add (Add (Num 3.0) (Mul (Num 2.0) (UserVar 0))) (Num 4.0)) (UserVar 0)))

; Run one phase at a time to see progression
(run 2)
(query debug_input)

(run 2)  
(query debug_input)

(run 2)
(query debug_input)

; Final result after all phases
(query debug_input)

; ========================================
; DIVISION TEST  
; ========================================

; Test the key division simplification: (x*x + 2*x) / x â†’ x + 2
(let debug_input (Div (Add (Mul (UserVar 0) (UserVar 0)) (Mul (Num 2.0) (UserVar 0))) (UserVar 0)))

(run 3)
(query debug_input) 