; Debug Constant Evaluation
; Focus on the exact issue: why isn't Mul(5.0, Sum(Range(1,3))) becoming 30.0?

(include "summation_with_collections.egg")

; Test the specific case step by step
(let range_sum (Sum (Range (Num 1.0) (Num 3.0))))  ; Should become 6.0
(let multiply_test (Mul (Num 5.0) (Sum (Range (Num 1.0) (Num 3.0)))))  ; Should become 30.0

; Also test if our rule works
(let direct_multiply (Mul (Num 5.0) (Num 6.0)))  ; Should become 30.0

(run-schedule (repeat 10 (saturate (run))))

(query-extract range_sum)
(query-extract multiply_test) 
(query-extract direct_multiply) 